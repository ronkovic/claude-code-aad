# SPEC-002-T02: Infrastructure クレート初期化

## 基本情報

| 項目 | 内容 |
|------|------|
| タスクID | SPEC-002-T02 |
| SPEC | SPEC-002 |
| 複雑度 | S（1-4時間） |
| 優先度 | Must |
| 依存 | SPEC-001（完了済み） |
| 担当 | 未アサイン |

---

## 概要

`crates/infrastructure/` ディレクトリに infrastructure クレートを作成し、設定管理の基盤を提供する。TOML パーサー（`toml` クレート）と `serde` を依存に含める。

---

## 作業内容

### 1. クレート作成
- `crates/infrastructure/Cargo.toml` を作成
- `crates/infrastructure/src/lib.rs` を作成
- ワークスペースの `Cargo.toml` に `infrastructure` を追加

### 2. 依存関係定義
- `domain` クレートへの依存を追加
- `toml` クレートを追加
- `serde`, `serde_derive` を追加
- `thiserror` を追加

### 3. モジュール構成
```
crates/infrastructure/
├── Cargo.toml
└── src/
    ├── lib.rs
    ├── error.rs          # インフラ層エラー
    └── config/           # 設定管理モジュール
        └── mod.rs
```

---

## 変更ファイル

| ファイル | 操作 | 説明 |
|----------|------|------|
| `Cargo.toml` | 変更 | workspace.members と dependencies に追加 |
| `crates/infrastructure/Cargo.toml` | 新規 | infrastructure クレート定義 |
| `crates/infrastructure/src/lib.rs` | 新規 | ライブラリルート |
| `crates/infrastructure/src/error.rs` | 新規 | エラー型定義 |
| `crates/infrastructure/src/config/mod.rs` | 新規 | 設定モジュール（スケルトン） |

---

## 受け入れ基準

- [ ] AC-2.1: `crates/infrastructure/Cargo.toml` が存在し、`toml` クレートが依存に含まれている
- [ ] AC-2.2: `crates/infrastructure/src/config/` モジュールが存在する
- [ ] AC-2.3: `serde`, `serde_derive` が依存に含まれている
- [ ] AC-2.4: `cargo build -p infrastructure` が成功する

---

## テスト項目

| テスト | 内容 | 期待結果 |
|--------|------|----------|
| ビルドテスト | `cargo build -p infrastructure` | 成功 |
| 依存テスト | `cargo tree -p infrastructure` | toml, serde が依存に含まれる |

---

## テストコマンド

```bash
# ビルド確認
cargo build -p infrastructure

# 依存確認
cargo tree -p infrastructure

# ワークスペース全体ビルド
cargo build --all
```

---

## 備考

- T01（application クレート）と並列実行可能
- 設定読み込みロジックは T03, T04 で実装
