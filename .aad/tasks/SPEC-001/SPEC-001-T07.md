# SPEC-001-T07: Entities - Style定義

## 基本情報

| 項目 | 内容 |
|------|------|
| **タスクID** | SPEC-001-T07 |
| **タイトル** | Entities - Style定義 |
| **複雑度** | S（1-4時間） |
| **依存タスク** | SPEC-001-T04 |
| **優先度** | Must Have |
| **ステータス** | 未着手 |

## 概要

出力スタイルを管理する`Style`エンティティを実装します。

## 作業内容

### 1. Styleエンティティ実装
- フィールド定義:
  - `name: StyleName`
  - `description: String`
  - `tokens: TokenMap`
  - `template_path: PathBuf`
  - `created_at: DateTime<Utc>`
  - `updated_at: DateTime<Utc>`
- メソッド実装:
  - `new()`: 新規作成
  - `apply()`: テンプレートにトークンを適用
  - `update_tokens()`: トークンマップ更新
- Debug, Clone実装

### 2. スタイル適用機能
- テンプレートファイル読み込み
- TokenMapによるトークン置換
- 結果文字列の生成

### 3. バリデーション
- template_pathの存在チェック
- トークンマップの整合性チェック

## 変更ファイル

- `crates/domain/src/entities/mod.rs`（更新）
- `crates/domain/src/entities/style.rs`（新規）

## 受け入れ基準

- [ ] Styleエンティティが正しく定義されている
- [ ] テンプレート適用機能が動作する
- [ ] トークン置換が正しく実行される
- [ ] 単体テストがすべてパス
- [ ] テストカバレッジ80%以上
- [ ] rustdocコメントが記述されている

## テスト項目

```rust
#[cfg(test)]
mod tests {
    #[test]
    fn test_style_creation() { /* ... */ }

    #[test]
    fn test_style_apply_template() { /* ... */ }

    #[test]
    fn test_style_update_tokens() { /* ... */ }

    #[test]
    fn test_style_token_replacement() { /* ... */ }

    #[test]
    fn test_style_template_path_validation() { /* ... */ }
}
```

## テストコマンド

```bash
# テスト実行
cargo test --package domain style

# カバレッジ確認
cargo llvm-cov --package domain --html
```

## 備考

- テンプレートエンジンはHandlebars使用を検討
- テストでは一時ファイルを使用（tempfileクレート）
- Serdeサポート（Serialize/Deserialize）を追加
