# SPEC-001-T09: 品質チェック（Lint/Format/Coverage）

## 基本情報

| 項目 | 内容 |
|------|------|
| **タスクID** | SPEC-001-T09 |
| **タイトル** | 品質チェック（Lint/Format/Coverage） |
| **複雑度** | S（1-4時間） |
| **依存タスク** | SPEC-001-T08 |
| **優先度** | Must Have |
| **ステータス** | 未着手 |

## 概要

domain クレート全体の品質を検証し、コーディング規約への準拠を確認します。

## 作業内容

### 1. Lintチェック
- `cargo clippy --all` を実行
- すべての警告を修正
- Clippy推奨事項に従ってコード改善

### 2. フォーマットチェック
- `cargo fmt --all -- --check` を実行
- フォーマット不備があれば修正
- rustfmt.toml設定確認

### 3. カバレッジ計測
- `cargo llvm-cov` を実行
- カバレッジ80%以上を確認
- 未カバー箇所にテスト追加

### 4. ドキュメントチェック
- すべての公開API（pub）にrustdocコメント記述
- `cargo doc --no-deps --open` でドキュメント確認
- サンプルコードの動作確認

### 5. ビルド確認
- `cargo build --all` でビルド成功確認
- `cargo test --all` で全テスト成功確認

## 変更ファイル

- すべての既存ファイル（修正対象）
- `.cargo/config.toml`（Clippy設定、必要に応じて）
- `rustfmt.toml`（フォーマット設定、必要に応じて）

## 受け入れ基準

- [ ] `cargo clippy --all` でエラー・警告ゼロ
- [ ] `cargo fmt --all -- --check` でエラーゼロ
- [ ] テストカバレッジ80%以上
- [ ] すべての公開APIにrustdocコメント記述
- [ ] `cargo build --all` 成功
- [ ] `cargo test --all` 成功

## テストコマンド

```bash
# Lintチェック
cargo clippy --all -- -D warnings

# フォーマットチェック
cargo fmt --all -- --check

# テスト実行
cargo test --all

# カバレッジ計測
cargo llvm-cov --all --html
open target/llvm-cov/html/index.html

# ドキュメント生成
cargo doc --no-deps --open

# 総合ビルド
cargo build --all --release
```

## カバレッジ目標

| モジュール | 目標カバレッジ |
|-----------|--------------|
| value_objects | 85%以上 |
| entities | 80%以上 |
| repositories | 70%以上（トレイト定義のみ） |
| 全体 | 80%以上 |

## 備考

- CI/CDパイプラインでも同じチェックを実行
- カバレッジレポートは `.gitignore` に追加
- rustdocのサンプルコードは `cargo test --doc` でテスト
