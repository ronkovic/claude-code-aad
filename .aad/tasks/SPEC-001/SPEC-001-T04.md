# SPEC-001-T04: Value Objects - Style関連定義

## 基本情報

| 項目 | 内容 |
|------|------|
| **タスクID** | SPEC-001-T04 |
| **タイトル** | Value Objects - Style関連定義 |
| **複雑度** | S（1-4時間） |
| **依存タスク** | SPEC-001-T01 |
| **優先度** | Must Have |
| **ステータス** | 未着手 |

## 概要

出力スタイルに関連するValue Objects（`StyleName`、`TokenMap`）を実装します。

## 作業内容

### 1. StyleName実装
- newtype patternでStringをラップ
- バリデーション（空文字チェック、文字数制限）
- Debug, Clone, PartialEq, Eq実装
- Display実装

### 2. TokenMap実装
- HashMap<String, String>をラップ
- トークン置換機能（`replace_tokens(&str) -> String`）
- Debug, Clone実装
- デフォルトトークンセット提供

### 3. バリデーション機能
- StyleName: 空文字拒否、最大長チェック
- TokenMap: 無限ループ検出（循環参照チェック）

## 変更ファイル

- `crates/domain/src/value_objects/mod.rs`（更新）
- `crates/domain/src/value_objects/style.rs`（新規）

## 受け入れ基準

- [ ] StyleNameが正しくバリデーションされる
- [ ] TokenMapがトークン置換を正しく実行できる
- [ ] 循環参照が検出される
- [ ] 単体テストがすべてパス
- [ ] テストカバレッジ80%以上
- [ ] rustdocコメントが記述されている

## テスト項目

```rust
#[cfg(test)]
mod tests {
    // StyleName tests
    #[test]
    fn test_style_name_valid() { /* ... */ }

    #[test]
    fn test_style_name_empty_rejected() { /* ... */ }

    #[test]
    fn test_style_name_display() { /* ... */ }

    // TokenMap tests
    #[test]
    fn test_token_map_replace() { /* ... */ }

    #[test]
    fn test_token_map_nested() { /* ... */ }

    #[test]
    fn test_token_map_circular_detection() { /* ... */ }

    #[test]
    fn test_token_map_default() { /* ... */ }
}
```

## テストコマンド

```bash
# テスト実行
cargo test --package domain style

# カバレッジ確認
cargo llvm-cov --package domain --html
```

## 備考

- トークン形式: `{{token_name}}`（Handlebars風）
- デフォルトトークン例: `{{feature}}`, `{{date}}`, `{{author}}`
- Serdeサポート（Serialize/Deserialize）を追加
