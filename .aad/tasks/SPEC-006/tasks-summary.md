# SPEC-006: TUIダッシュボード - タスク一覧

**作成日**: 2026-01-18

**総タスク数**: 7

**推定工数**: 32時間（S×2 + M×4 + L×1）

---

## 📋 タスク一覧

### Must Have（必須）

#### SPEC-006-T01: TUIクレート作成
- **複雑度**: S（1-4時間）
- **優先度**: Must
- **依存**: なし
- **概要**: `crates/tui/` に TUI クレートを作成し、ratatui 0.28 と crossterm を依存に含める

#### SPEC-006-T02: App構造体・状態管理実装
- **複雑度**: M（4-8時間）
- **優先度**: Must
- **依存**: T01
- **概要**: TUI アプリケーション状態を管理する `App` 構造体を実装し、`update()` と `render()` メソッドを提供

#### SPEC-006-T03: Widgets実装
- **複雑度**: L（8時間以上）
- **優先度**: Must
- **依存**: T02
- **概要**: SessionList, TaskProgress, SpecTree, ContextBar, PhaseIndicator の5つのWidgetを実装

#### SPEC-006-T04: Views実装
- **複雑度**: M（4-8時間）
- **優先度**: Must
- **依存**: T03
- **概要**: Dashboard, Monitor, Workflow, Detail の4つのViewを実装し、Widgetを組み合わせて表示

#### SPEC-006-T05: キーボードイベント処理実装
- **複雑度**: M（4-8時間）
- **優先度**: Must
- **依存**: T04
- **概要**: q, Tab, ↑↓, Enter, Esc キーの操作を実装

#### SPEC-006-T06: monitor コマンド連携
- **複雑度**: M（4-8時間）
- **優先度**: Must
- **依存**: T05
- **概要**: `aad monitor` コマンドでTUIダッシュボードを起動し、1秒ごとに定期更新

#### SPEC-006-T07: 品質チェック
- **複雑度**: S（1-4時間）
- **優先度**: Must
- **依存**: T01-T06
- **概要**: 全実装完了後、品質チェック（ビルド、テスト、Lint、フォーマット）を実行

---

## 🔗 依存関係グラフ

```
T01 (TUIクレート作成)
 └─> T02 (App構造体)
      └─> T03 (Widgets)
           └─> T04 (Views)
                └─> T05 (キーボードイベント)
                     └─> T06 (monitor コマンド)
                          └─> T07 (品質チェック)
```

**並列実行可能なタスク**: なし（順次依存）

---

## 📊 Wave分割案

### Wave 1: 基盤構築
- T01: TUIクレート作成

### Wave 2: コア機能実装
- T02: App構造体・状態管理実装

### Wave 3: UI実装
- T03: Widgets実装

### Wave 4: View統合
- T04: Views実装

### Wave 5: インタラクション
- T05: キーボードイベント処理実装

### Wave 6: CLI連携
- T06: monitor コマンド連携

### Wave 7: 品質保証
- T07: 品質チェック

---

## 🎯 実装方針

### 重点ポイント
1. **70%ルールの可視化**: ContextBar でコンテキスト使用率を色分け表示
2. **キーボード操作の快適性**: 直感的なキー操作を実装
3. **リアルタイム更新**: 1秒ごとのセッション状態更新
4. **パフォーマンス**: 画面描画時間 16ms以内（60fps）

### 技術的課題
1. **Ratatui 0.28 の活用**: Widget トレイトの正しい実装
2. **非同期イベント処理**: crossterm のイベントループ設計
3. **ターミナルクリーンアップ**: 正常終了時の確実なクリーンアップ

### テスト戦略
1. **ユニットテスト**: 各 Widget と View の動作確認
2. **統合テスト**: App 全体の状態遷移確認
3. **手動テスト**: キーボード操作と UI の確認

---

## 📝 注意事項

- このSPECは順次依存のため、並列実行は困難
- T03 (Widgets) は複雑度 L のため、時間がかかる可能性あり
- ターミナルのクリーンアップは必ず行う（ユーザー体験重視）
- 現段階では実際のセッションデータ取得は未実装（ダミーデータで問題なし）

---

## 🔄 次のステップ

タスク分割完了後は以下のいずれかを選択:

1. **個別実装**: `/aad:worktree SPEC-006-T01` で最初のタスクに着手
2. **全自動実行**: `/aad:orchestrate SPEC-006` で全タスクを自動実行

---

**最終更新**: 2026-01-18
