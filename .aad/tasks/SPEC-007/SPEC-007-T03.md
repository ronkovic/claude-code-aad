# SPEC-007-T03: 依存関係に基づくタスク進行ロジック実装

## 複雑度: M

## 実装内容
- `next_task()` メソッドの実装
- 依存関係を考慮したタスク選択ロジック
- リトライ機能（最大3回、設定可能）
- タスク完了時の依存関係更新
- スキップ処理（依存タスクが未完了の場合）

## 変更ファイル
- `crates/application/src/loop_engine/mod.rs`（`next_task()`メソッド追加）
- `crates/domain/src/entities/task.rs`（依存関係情報追加）

## テストケース
- 依存関係なしのタスク進行テスト
- 依存タスク完了後の進行テスト
- 依存タスク未完了時のスキップテスト
- 全タスク完了時の終了テスト
- リトライ機能テスト（1回目失敗、2回目成功）
- リトライ上限到達テスト

## 依存関係
- SPEC-007-T01（LoopEngine基盤）
- SPEC-007-T02（CompletionDetector）

## 受け入れ基準
- [ ] AC-3.1: `next_task()` メソッドが実装されている
- [ ] AC-3.2: 依存タスクが完了している場合のみ次タスクが開始される
- [ ] AC-3.3: 依存タスクが未完了の場合はスキップされる
- [ ] AC-3.4: 全タスク完了時にループが終了する
- [ ] AC-3.5: リトライ機能が実装されている（最大3回）

## 実装時の注意点（過去の学びから）
- SPEC-004のDependencyGraphの実装パターンを参考にする
- リトライカウントの管理は`HashMap<TaskId, u32>`で実装
- テストではBuilder パターンまたはDefaultトレイトを活用（SPEC-004の学び）

## GitHub Issue
- 未作成
