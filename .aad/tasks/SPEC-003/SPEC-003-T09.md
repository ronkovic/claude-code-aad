# SPEC-003-T09: 品質チェック

## 基本情報

| 項目 | 内容 |
|------|------|
| タスクID | SPEC-003-T09 |
| SPEC | SPEC-003 |
| 複雑度 | S（1-4時間） |
| 優先度 | Must |
| 依存 | T01-T08 |
| 担当 | 未アサイン |

---

## 概要

SPEC-003 の全実装が完了した後、品質チェック（ビルド、テスト、Lint、フォーマット）を実行し、受け入れ基準を満たすことを確認する。

---

## 作業内容

### 1. ビルド確認
```bash
cargo build --all
cargo build -p cli --release
```

### 2. テスト実行
```bash
cargo test --all
cargo test -p cli
```

### 3. Lintチェック
```bash
cargo clippy --all -- -D warnings
```

### 4. フォーマットチェック
```bash
cargo fmt --all -- --check
```

### 5. 統合テスト（手動）
```bash
# 1. init コマンド
cd /tmp/test-aad
cargo run -p cli -- init

# 2. spec コマンド
cargo run -p cli -- spec TEST-001

# 3. tasks コマンド
cargo run -p cli -- tasks TEST-001

# 4. style コマンド
cargo run -p cli -- style list
cargo run -p cli -- style apply standard

# 5. worktree コマンド
cargo run -p cli -- worktree TEST-001

# クリーンアップ
git worktree remove ../aad-TEST-001
git branch -D feature/TEST-001
```

### 6. ヘルプメッセージ確認
```bash
cargo run -p cli -- --help
cargo run -p cli -- init --help
cargo run -p cli -- spec --help
cargo run -p cli -- tasks --help
cargo run -p cli -- style --help
cargo run -p cli -- worktree --help
```

---

## 変更ファイル

なし（検証のみ）

---

## 受け入れ基準

### 非機能テスト
- [ ] `cargo build --all` が成功する
- [ ] `cargo test --all` が全て pass する
- [ ] `aad --help` が正しく表示される
- [ ] 各コマンド（init, spec, tasks, style, worktree）が基本動作する
- [ ] エラーハンドリングが適切に実装されている
- [ ] ユーザーフィードバックメッセージが日本語で明確である

### セキュリティ
- [ ] コマンドインジェクション対策が実装されている（Git操作）
- [ ] パストラバーサル対策が実装されている

---

## テストコマンド

```bash
# 全品質チェック実行
./scripts/quality-check.sh

# または個別実行
cargo build --all
cargo test --all
cargo clippy --all -- -D warnings
cargo fmt --all -- --check
```

---

## 期待結果

| チェック項目 | 期待結果 |
|-------------|----------|
| ビルド | エラーゼロ |
| テスト | 全テスト成功 |
| Clippy | 警告ゼロ（-D warningsモード） |
| Rustfmt | フォーマット問題なし |
| 統合テスト | 全コマンド正常動作 |

---

## 備考

- このタスクは全タスク完了後に実行
- 問題があれば該当タスクに戻って修正
- 統合テストは手動実行が必要
